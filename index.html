<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="assets/css/reset.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/momentjs/2.12.0/moment.min.js"></script>

    <title>All Aboard</title>
</head>

<style>
    body {
        margin: 0;
        background-color: grey;
    }

    .timeline {
        position: relative;
        max-width: 1200px;
        margin: 0 auto;
    }

    /* use the after class to place the line after blank content */
    .timeline::after {
        content: '';
        position: absolute;
        width: 6px;
        background-color: white;
        top: 0;
        bottom: 0;
        left: 50%;
        margin-left: -3px;
    }

    .container {
        padding: 10px 40px;
        position: relative;
        background-color: inherit;
        width: 44%;
    }

    .container::after {
        content: '';
        position: absolute;
        width: 25px;
        height: 25px;
        right: -17px;
        background-color: white;
        border: 4 px solid black;
        top: 15px;
        border-radius: 50%;
        z-index: 1;
    }

    .left {
        left: 0;
    }

    .right {
        left: 50%
    }

    .left::before {
        content: " ";
        height: 0;
        position: absolute;
        top: 22px;
        width: 0;
        z-index: 1;
        right: 30px;
        border: medium solid white;
        border-width: 10px o 10px 10px;
        border-color: transparent transparent transparent white;
    }

    .right::after {
        left: -16px;
    }

    .content {
        padding: 20px 30px;
        background-color: white;
        position: relative;
        border-radius: 6px;
    }
</style>

<body>
    <header>
        <nav>
            <h1>Navbar</h1>
            my destinations
            remove trains
            update all???
            <div class="button-group">
                <button id="add-trip">Add Trip</button>
                <!-- i would like this button to toggle x's on trip containers -->
                <!-- using for each to clear. -->
                <button id="clear-trip">Clear Trip</button>
            </div>
        </nav>
    </header>
    <section id="results">
        <div class="timeline">
            <h1>Current Train Schedule</h1>
            <div class="container left">
                <div class="content">
                    <table>
                        <tr id="table-row">
                            <th id="train-name-header"></th>
                            <th id="destination-header"></th>
                            <th id="first-time-header"></th>
                            <th id="frequency-header"></th>
                            <!-- <th id=""></th> -->
                        </tr>
                    </table>
                </div>
            </div>
            <div class="container right">
                <div class="content">
                    <table>
                        <tr id="table-row">
                            <th id="train-name-header"></th>
                            <th id="destination-header"></th>
                            <th id="first-time-header"></th>
                            <th id="frequency-header"></th>
                            <!-- <th id=""></th> -->
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </section>
    <section id="form">
        <form action="">
            <h1>Add Train</h1>
            <label for="">Train Name</label>
            <input id="train-name" type="text">
            <label for="">Destination</label>
            <input id="destination" type="text">
            <label for="">First Train Time (military time)</label>
            <input id="first-time" type="number">
            <label for="">Frequency (min)</label>
            <input id="frequency" type="number">
            <button id="submit-click" type="submit">Submit</button>
        </form>
    </section id="results">

    <footer>
        <div class="button-group">
            <button id="add-trip">Add Trip</button>
            <!-- i would like this button to toggle x's on trip containers -->
            <!-- using for each to clear. -->
            <button id="clear-trip">Clear Trip</button>
        </div>
    </footer>

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-app.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#config-web-app -->

    <!-- Specific Firebase products we want -->
    <script src="https://www.gstatic.com/firebasejs/6.1.1/firebase-database.js"></script>


    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCU2YU9R4rNoIGmqxjyELBxMFGRe0SEp1E",
            authDomain: "all-aboard-54dff.firebaseapp.com",
            databaseURL: "https://all-aboard-54dff.firebaseio.com",
            projectId: "all-aboard-54dff",
            storageBucket: "all-aboard-54dff.appspot.com",
            messagingSenderId: "381573422068",
            appId: "1:381573422068:web:1fda06f81dcc1d07"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);


        //variables
        var database = firebase.database();

        var trainName = ""
        var destination = ""
        var firstTime = ""
        var frequency = ""

        // we need to read a static snapshot of the contents at a given path
        database.ref().on("value", function (snapshot) {
            console.log(snapshot)

            trainName = snapshot.val().trainName;
            destination = snapshot.val().destination;
            firstTime = snapshot.val().fristTime;
            frequency = snapshot.val().frequency;

            console.log(trainName)
            console.log(destination)
            console.log(firstTime)
            console.log(frequency)

            $("#train-name-header").text(trainName)
            $("#destination-header").text(destination)
            $("#firstTime-header").text(firstTime)
            $("#frequency-header").text(frequency)

        }, function (errorObject) {
            console.log("the read failed: " + errorObject.code);
        });


        $("#submit-click").on("click", function () {
            trainName = $("#train-name").val().trim();
            destination = $("#destination").val().trim();
            firstTime = $("#first-time").val().trim();
            frequency = $("#frequency").val().trim();

            $("#train-name-header").append(trainName)
            $("#destination-header").append(destination)
            $("#first-time-header").append(firstTime)
            $("#frequency-header").append(frequency)



            // should a use a function to write new train info???
            writeTrainInfo()

            function writeTrainInfo() {
                database.ref().set({
                    trainName: trainName,
                    destination: destination,
                    firstTime: firstTime,
                    frequency: frequency
                })
            }

            console.log(trainName)
            console.log(destination)
            console.log(firstTime)
            console.log(frequency)


            // database.ref().set({
            //     trainName: trainName,
            //     destinationItem: destination,
            //     firstTimeItem: firstTime,
            //     frequencyItem: frequency
            // })

        });

        //consider what a train schedule must have
        //first we must save all train schedules that works like a todo list
        //seems like i will have to incorporate an object of arrays to accurate couple information together

    </script>
</body>

</html>